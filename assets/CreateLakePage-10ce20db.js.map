{"version":3,"file":"CreateLakePage-10ce20db.js","sources":["../../src/pages/lakes/CreateLakePage.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport LakesTable from './widgets/LakesTable.vue'\nimport EditLakeForm from './widgets/EditLakeForm.vue'\nimport { Lake } from './types'\nimport { useLakes } from './composables/useLakes'\nimport { useModal, useToast } from 'vuestic-ui'\n\nconst doShowEditUserModal = ref(false)\n\nconst { lakes, isLoading, filters, sorting, pagination, ...usersApi } = useLakes()\n\nconst userToEdit = ref<Lake | null>(null)\n\nconst showEditUserModal = (lake: Lake) => {\n  userToEdit.value = lake\n  doShowEditUserModal.value = true\n}\n\nconst showAddUserModal = () => {\n  userToEdit.value = null\n  doShowEditUserModal.value = true\n}\n\nconst { init: notify } = useToast()\n\nconst onUserSaved = async (lake: Lake) => {\n  if (userToEdit.value) {\n    await usersApi.update(lake)\n    notify({\n      message: `${lake.englishName} has been updated`,\n      color: 'success',\n    })\n  } else {\n    usersApi.add(lake)\n    notify({\n      message: `${lake.englishName} has been created`,\n      color: 'success',\n    })\n  }\n}\n\nconst onUserDelete = async (lake: Lake) => {\n  await usersApi.remove(lake)\n  notify({\n    message: `${lake.englishName} has been deleted`,\n    color: 'success',\n  })\n}\n\nconst editFormRef = ref()\n\nconst { confirm } = useModal()\n\nconst beforeEditFormModalClose = async (hide: () => unknown) => {\n  if (editFormRef.value.isFormHasUnsavedChanges) {\n    const agreed = await confirm({\n      maxWidth: '380px',\n      message: 'Form has unsaved changes. Are you sure you want to close it?',\n      size: 'small',\n    })\n    if (agreed) {\n      hide()\n    }\n  } else {\n    hide()\n  }\n}\n</script>\n\n<template>\n  <h1 class=\"page-title\">Create Lake</h1>\n\n  <VaCard>\n    <VaCardContent>\n      <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n        <!-- <RouterLink to=\"/lake/lake-list/lake-create\" aria-label=\"Visit home page\">\n          Add User\n        </RouterLink>\n        <VaButton @click=\"showAddUserModal\">Add User</VaButton> -->\n      </div>\n\n      <EditLakeForm\n        ref=\"editFormRef\"\n        :user=\"userToEdit\"\n        :save-button-label=\"userToEdit ? 'Save' : 'Add'\"\n        @close=\"cancel\"\n        @save=\"\n          (user) => {\n            onUserSaved(user)\n            ok()\n          }\n        \"\n      />\n    </VaCardContent>\n  </VaCard>\n</template>\n"],"names":["ref","lakes","isLoading","filters","sorting","pagination","usersApi","useLakes","userToEdit","notify","useToast","onUserSaved","lake","editFormRef","useModal"],"mappings":"wlBAQ4BA,EAAI,EAAK,EAE/B,KAAA,CAAE,MAAAC,EAAO,UAAAC,EAAW,QAAAC,EAAS,QAAAC,EAAS,WAAAC,EAAY,GAAGC,GAAaC,IAElEC,EAAaR,EAAiB,IAAI,EAYlC,CAAE,KAAMS,CAAO,EAAIC,EAAS,EAE5BC,EAAc,MAAOC,GAAe,CACpCJ,EAAW,OACP,MAAAF,EAAS,OAAOM,CAAI,EACnBH,EAAA,CACL,QAAS,GAAGG,EAAK,WAAW,oBAC5B,MAAO,SAAA,CACR,IAEDN,EAAS,IAAIM,CAAI,EACVH,EAAA,CACL,QAAS,GAAGG,EAAK,WAAW,oBAC5B,MAAO,SAAA,CACR,EACH,EAWIC,EAAcb,IAEA,OAAAc,EAAS"}