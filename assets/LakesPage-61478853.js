import{u as T,d as R}from"./index-aa414725.js";import{u as j}from"./useModal-b32e5a1a.js";import{d as D,W as A,c as I,r as d,o as N,h as U,b as s,w as i,e as l,t as f,J as B,u as n,D as M,K as q,F as E,_ as W,k as w}from"./index-7a1b065c.js";import{_ as H}from"./EditLakeForm.vue_vue_type_script_setup_true_lang-46cd6188.js";import{u as J}from"./useLakes-32ebce66.js";import{u as K}from"./useToast-e379f7bf.js";import"./projects-88949a9d.js";import"./utils-b2fc192b.js";import"./useForm-c9dd0d22.js";import"./useProjects-5bf93676.js";const G={class:"flex items-center gap-2 max-w-[230px] ellipsis"},Q={class:"max-w-[120px] ellipsis"},X={class:"ellipsis max-w-[120px]"},Y={href:"#",class:"va-link"},Z={class:"ellipsis max-w-[120px]"},ee={href:"#",class:"va-link"},ae={class:"flex gap-2 justify-end"},se={class:"flex flex-col-reverse md:flex-row gap-2 justify-between items-center py-2"},oe={key:0,class:"flex"},te=D({__name:"LakesTable",props:{lakes:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0},sortBy:{type:String,required:!0},sortingOrder:{type:String,required:!0}},emits:["edit-user","delete-user","update:sortBy","update:sortingOrder"],setup(S,{emit:b}){const k=R([{label:"English Name",key:"englishName",sortable:!0},{label:"gujaratiName",key:"gujaratiName",sortable:!0},{label:"geoTag",key:"geoTag",sortable:!0},{label:"village",key:"village",sortable:!0},{label:"droneShots",key:"droneShots",sortable:!0},{label:" ",key:"actions",align:"right"}]),m=S,v=b,_=A(m,"lakes"),y=T(m,"sortBy",v),g=T(m,"sortingOrder",v),p=I(()=>Math.ceil(m.pagination.total/m.pagination.perPage)),{confirm:h}=j(),V=async a=>{await h({title:"Delete user",message:`Are you sure you want to delete ${a.englishName}?`,okText:"Delete",cancelText:"Cancel",size:"small",maxWidth:"380px"})&&v("delete-user",a)};return(a,o)=>{const c=d("VaButton"),$=d("RouterLink"),x=d("VaDataTable"),t=d("VaSelect"),r=d("VaPagination");return N(),U(E,null,[s(x,{"sort-by":n(y),"onUpdate:sortBy":o[0]||(o[0]=e=>M(y)?y.value=e:null),"sorting-order":n(g),"onUpdate:sortingOrder":o[1]||(o[1]=e=>M(g)?g.value=e:null),columns:n(k),items:_.value,loading:a.$props.loading},{"cell(englishName)":i(({rowData:e})=>[l("div",G,f(e.englishName),1)]),"cell(gujaratiName)":i(({rowData:e})=>[l("div",Q,f(e.gujaratiName),1)]),"cell(geoTag)":i(({rowData:e})=>[l("div",X,[l("a",Y,f(e.geoTag),1)])]),"cell(droneShots)":i(({rowData:e})=>[l("div",Z,[l("a",ee,f(e.droneShots),1)])]),"cell(village)":i(({rowData:e})=>[B(f(e.village),1)]),"cell(actions)":i(({rowData:e})=>[l("div",ae,[s($,{to:`${e.id}`,"aria-label":"Visit home page"},{default:i(()=>[s(c,{preset:"primary",size:"small",icon:"visibility","aria-label":"View lake"})]),_:2},1032,["to"]),s(c,{preset:"primary",size:"small",icon:"mso-edit","aria-label":"Edit lake",onClick:C=>a.$emit("edit-user",e)},null,8,["onClick"]),s(c,{preset:"primary",size:"small",icon:"mso-delete",color:"danger","aria-label":"Delete lake",onClick:C=>V(e)},null,8,["onClick"])])]),_:1},8,["sort-by","sorting-order","columns","items","loading"]),l("div",se,[l("div",null,[l("b",null,f(a.$props.pagination.total)+" results.",1),B(" Results per page "),s(t,{modelValue:a.$props.pagination.perPage,"onUpdate:modelValue":o[2]||(o[2]=e=>a.$props.pagination.perPage=e),class:"!w-20",options:[10,50,100]},null,8,["modelValue"])]),p.value>1?(N(),U("div",oe,[s(c,{preset:"secondary",icon:"va-arrow-left","aria-label":"Previous page",disabled:a.$props.pagination.page===1,onClick:o[3]||(o[3]=e=>a.$props.pagination.page--)},null,8,["disabled"]),s(c,{class:"mr-2",preset:"secondary",icon:"va-arrow-right","aria-label":"Next page",disabled:a.$props.pagination.page===p.value,onClick:o[4]||(o[4]=e=>a.$props.pagination.page++)},null,8,["disabled"]),s(r,{modelValue:a.$props.pagination.page,"onUpdate:modelValue":o[5]||(o[5]=e=>a.$props.pagination.page=e),"buttons-preset":"secondary",pages:p.value,"visible-pages":5,"boundary-links":!1,"direction-links":!1},null,8,["modelValue","pages"])])):q("",!0)])],64)}}});const le=W(te,[["__scopeId","data-v-a889ea3d"]]),ne=l("h1",{class:"page-title"},"Lakes",-1),re={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},ie={class:"flex flex-col md:flex-row gap-2 justify-start"},de={class:"va-h5"},Ve=D({__name:"LakesPage",setup(S){const b=w(!1),{lakes:k,isLoading:m,filters:v,sorting:_,pagination:y,...g}=J(),p=w(null),h=t=>{p.value=t,b.value=!0},{init:V}=K(),a=async t=>{p.value?(await g.update(t),V({message:`${t.englishName} has been updated`,color:"success"})):(g.add(t),V({message:`${t.englishName} has been created`,color:"success"}))},o=async t=>{await g.remove(t),V({message:`${t.englishName} has been deleted`,color:"success"})},c=w(),{confirm:$}=j(),x=async t=>{c.value.isFormHasUnsavedChanges?await $({maxWidth:"380px",message:"Form has unsaved changes. Are you sure you want to close it?",size:"small"})&&t():t()};return(t,r)=>{const e=d("VaIcon"),C=d("VaInput"),L=d("VaCardContent"),O=d("VaCard"),P=d("VaModal");return N(),U(E,null,[ne,s(O,null,{default:i(()=>[s(L,null,{default:i(()=>[l("div",re,[l("div",ie,[s(C,{modelValue:n(v).search,"onUpdate:modelValue":r[0]||(r[0]=u=>n(v).search=u),placeholder:"Search"},{prependInner:i(()=>[s(e,{name:"search",color:"secondary",size:"small"})]),_:1},8,["modelValue"])])]),s(le,{"sort-by":n(_).sortBy,"onUpdate:sortBy":r[1]||(r[1]=u=>n(_).sortBy=u),"sorting-order":n(_).sortingOrder,"onUpdate:sortingOrder":r[2]||(r[2]=u=>n(_).sortingOrder=u),lakes:n(k),loading:n(m),pagination:n(y),onEditUser:h,onDeleteUser:o},null,8,["sort-by","sorting-order","lakes","loading","pagination"])]),_:1})]),_:1}),s(P,{modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=u=>b.value=u),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":"","before-cancel":x},{default:i(({cancel:u,ok:z})=>[l("h1",de,f(p.value?"Edit user":"Add user"),1),s(H,{ref_key:"editFormRef",ref:c,user:p.value,"save-button-label":p.value?"Save":"Add",onClose:u,onSave:F=>{a(F),z()}},null,8,["user","save-button-label","onClose","onSave"])]),_:1},8,["modelValue"])],64)}}});export{Ve as default};
//# sourceMappingURL=LakesPage-61478853.js.map
